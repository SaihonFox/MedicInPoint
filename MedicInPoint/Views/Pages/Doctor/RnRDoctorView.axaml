<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:MedicInPoint.ViewModels.Pages.Doctor"
			 xmlns:drawer="using:MedicInPoint.Views.UserControls.Drawers"
			 xmlns:medic="https://github.com/saihonfox"
			 xmlns:i="using:Avalonia.Xaml.Interactivity"
			 xmlns:ic="using:Avalonia.Xaml.Interactions.Core"
			 xmlns:bh="using:TestAutoCompleteBehavior.Behaviors"
			 mc:Ignorable="d"
			 d:DesignWidth="1500" d:DesignHeight="1000"
			 x:Class="MedicInPoint.Views.Pages.Doctor.RnRDoctorView"
			 x:DataType="vm:RnRDoctorViewModel">
	<Design.DataContext>
		<vm:RnRDoctorViewModel />
	</Design.DataContext>

	<Grid>
		<Grid>
			<Button Classes="back" Command="{CompiledBinding BackCommand}" HotKey="Escape" Margin="30,45,0,0" HorizontalAlignment="Left" />

			<Grid ColumnDefinitions="300,*,300" Margin="25,100">
				<AutoCompleteBox Grid.Column="0" Name="acb" Classes="search" IsDropDownOpen="False" Watermark="Искать пациента" FilterMode="ContainsOrdinal" HorizontalAlignment="Stretch" VerticalAlignment="Top" Width="300" Height="50">
					<i:Interaction.Behaviors>
						<bh:AutoCompleteZeroMinimumPrefixLengthDropdownBehavior />
					</i:Interaction.Behaviors>
				</AutoCompleteBox>

				<Grid Grid.Column="1" ColumnDefinitions="auto,20,auto,20,auto" HorizontalAlignment="Center" VerticalAlignment="Top" Height="50">
					<RadioButton Classes="ac" Grid.Column="0" GroupName="a_c_group" Name="requests_rb"
								 IsChecked="True"
								 Content="Запросы"
								 HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
								 HorizontalAlignment="Right"
								 Height="50" />
					<RadioButton Classes="ac" Grid.Column="2" GroupName="a_c_group" Name="record_rb"
								 Content="Запись"
								 HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
								 HorizontalAlignment="Left"
								 Height="50" />
				</Grid>
			</Grid>

			<Grid ColumnDefinitions="300,25,*,25,300" ClipToBounds="False" Margin="25,175,25,25">
				<!--#region Patients List -->
				<Border Grid.Column="0" Classes="drawerbg" ClipToBounds="False" Padding="6">
					<ListBox ClipToBounds="False" ItemsSource="{CompiledBinding Patients}" Background="Transparent" SelectionMode="Single" SelectedIndex="{CompiledBinding SelectedPatientIndex, Mode=TwoWay}" SelectedItem="{CompiledBinding SelectedPatient, Mode=TwoWay}" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Top">
						<ListBox.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel ClipToBounds="False" Orientation="Vertical" />
							</ItemsPanelTemplate>
						</ListBox.ItemsPanel>
						<ListBox.Styles>
							<Style Selector="ListBoxItem">
								<Setter Property="Padding" Value="10" />
								<Setter Property="ClipToBounds" Value="False" />
								<Setter Property="Transitions">
									<Transitions>
										<TransformOperationsTransition Property="RenderTransform" Duration="0:0:.075" />
									</Transitions>
								</Setter>
							</Style>
							<Style Selector="ListBoxItem /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="ClipToBounds" Value="False" />
								<Setter Property="Background" Value="Transparent" />
							</Style>
							<Style Selector="ListBoxItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="ClipToBounds" Value="False" />
								<Setter Property="Background" Value="Transparent" />
								<Setter Property="Effect">
									<DropShadowEffect Color="#E4E8F5" BlurRadius="20" OffsetX="0" OffsetY="0" />
								</Setter>
								<Setter Property="RenderTransform" Value="scale(1.02)" />
							</Style>
							<Style Selector="ListBoxItem:selected /template/ ContentPresenter#PART_ContentPresenter">
								<Setter Property="ClipToBounds" Value="False" />
								<Setter Property="Background" Value="Transparent" />
								<Setter Property="Effect">
									<DropShadowEffect Color="#BFBEBE" BlurRadius="20" OffsetX="0" OffsetY="0" />
								</Setter>
							</Style>
						</ListBox.Styles>
						<ListBox.ItemTemplate>
							<DataTemplate>
								<Border ClipToBounds="False" CornerRadius="16" Background="#F5F5F9" Padding="10">
									<Grid ColumnDefinitions="auto,5,*">
										<Border Grid.Column="0" CornerRadius="100" Background="#1A6FEE" IsVisible="{CompiledBinding Sex, Converter={x:Static ObjectConverters.Equal}, ConverterParameter=Мужской}" Width="5" />
										<Border Grid.Column="0" CornerRadius="100" Background="#FF47CA" IsVisible="{CompiledBinding Sex, Converter={x:Static ObjectConverters.Equal}, ConverterParameter=Женский}" Width="5" />
										<TextBlock Grid.Column="2" Text="{CompiledBinding FullName}" FontSize="20" TextAlignment="Center" TextWrapping="WrapWithOverflow" Padding="0" VerticalAlignment="Center" />
									</Grid>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</Border>
				<!--#endregion Patients List -->

				<!--#region Main Content -->
				<ScrollViewer Grid.Column="2" ClipToBounds="False" HorizontalScrollBarVisibility="Hidden" IsVisible="{CompiledBinding #requests_rb.IsChecked}">
					<ItemsControl ClipToBounds="False" Name="requests_ic" Padding="10">
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel ClipToBounds="False" Orientation="Vertical" Spacing="20" />
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
					</ItemsControl>
				</ScrollViewer>
				<Grid Grid.Column="2" Name="record_g" IsVisible="{CompiledBinding #record_rb.IsChecked}">
					<Border Classes="drawerbg">
						<StackPanel Orientation="Vertical" Spacing="10">
							<Button Command="{CompiledBinding NewOrderCommand}" CornerRadius="12" IsEnabled="{CompiledBinding IsRecordButtonEnabled}" Content="Записать" FontSize="24" Background="#00B712" Foreground="White" Margin="200,0" HorizontalContentAlignment="Center" HorizontalAlignment="Stretch">
								<Button.Styles>
									<Style Selector="Button:disabled /template/ ContentPresenter">
										<Setter Property="Background" Value="Gray" />
									</Style>
								</Button.Styles>
							</Button>

							<StackPanel Orientation="Vertical" Spacing="5">
								<TextBlock Text="Адрес" Foreground="#7E7E9A" Margin="8,0" />
								<TextBox FontSize="20" Text="{CompiledBinding OrderRecordAddress.Address, Mode=TwoWay}" Padding="10" />

								<Grid ColumnDefinitions="*,5,*,5,*,5,*">
									<StackPanel Grid.Column="0" Orientation="Vertical" Spacing="5">
										<TextBlock Text="Квартира" Foreground="#7E7E9A" HorizontalAlignment="Center" />
										<TextBox Name="address_tb" Text="{CompiledBinding OrderRecordAddress.Room, Mode=TwoWay}" Padding="10" HorizontalContentAlignment="Center" />
									</StackPanel>
									<StackPanel Grid.Column="2" Orientation="Vertical" Spacing="5">
										<TextBlock Text="Подъезд" Foreground="#7E7E9A" HorizontalAlignment="Center" />
										<TextBox Name="entrance_tb" Text="{CompiledBinding OrderRecordAddress.Entrance, Mode=TwoWay}" Padding="10" HorizontalContentAlignment="Center" />
									</StackPanel>
									<StackPanel Grid.Column="4" Orientation="Vertical" Spacing="5">
										<TextBlock Text="Этаж" Foreground="#7E7E9A" HorizontalAlignment="Center" />
										<TextBox Name="floor_tb" Text="{CompiledBinding OrderRecordAddress.Floor, Mode=TwoWay}" Padding="10" HorizontalContentAlignment="Center" />
									</StackPanel>
									<StackPanel Grid.Column="6" Orientation="Vertical" Spacing="5">
										<TextBlock Text="Домофон" Foreground="#7E7E9A" HorizontalAlignment="Center" />
										<TextBox Name="intercome_tb" Text="{CompiledBinding OrderRecordAddress.Intercome, Mode=TwoWay}" Padding="10" HorizontalContentAlignment="Center" />
									</StackPanel>
								</Grid>
							</StackPanel>

							<StackPanel Orientation="Vertical" Spacing="5" HorizontalAlignment="Center">
								<TextBlock Text="Дата и время" Foreground="#7E7E9A" HorizontalAlignment="Center" />
								<DatePicker />
								<TimePicker SecondIncrement="1" />
							</StackPanel>

							<StackPanel Orientation="Vertical" Spacing="5">
								<TextBlock Text="Комментарий" Foreground="#7E7E9A" Margin="8,0" />
								<TextBox Text="{CompiledBinding OrderRecord.Comment, Mode=TwoWay}" FontSize="20" Padding="10" />
							</StackPanel>

							<Border CornerRadius="100" Background="#DBDBDC" Height="1" />
							<TextBlock Text="Анализы" FontSize="26" HorizontalAlignment="Center" />

							<Border CornerRadius="15" BorderBrush="#F4F4F4" BorderThickness="1" Background="White" Padding="10">
								<Border.Effect>
									<DropShadowEffect BlurRadius="20" Color="#E4E8F5" Opacity="0.6" OffsetX="0" OffsetY="0" />
								</Border.Effect>
								<Grid ColumnDefinitions="*,10,auto" VerticalAlignment="Center">
									<ComboBox ItemsSource="{CompiledBinding AllAnalyses}" SelectedItem="{CompiledBinding SelectedAnalysis}" CornerRadius="8" BorderThickness="0" HorizontalAlignment="Stretch">
										<ComboBox.ItemTemplate>
											<DataTemplate>
												<TextBlock Text="{CompiledBinding Name}" TextWrapping="Wrap" FontSize="20" />
											</DataTemplate>
										</ComboBox.ItemTemplate>
									</ComboBox>
									<Button Grid.Column="2" Name="add_order" Content="Добавить" Padding="6">
										<Button.Styles>
											<Style Selector="Button">
												<Setter Property="CornerRadius" Value="10" />
												<Setter Property="Background" Value="#00B712" />
												<Setter Property="Foreground" Value="White" />

												<Setter Property="RenderTransform" Value="none" />
												<Setter Property="Transitions">
													<Transitions>
														<TransformOperationsTransition Property="RenderTransform" Duration="0:0:.075" />
													</Transitions>
												</Setter>

												<Style Selector="^:pointerover">
													<Setter Property="Background" Value="#0A8D17" />
												</Style>
											</Style>
										</Button.Styles>

										<StackPanel Orientation="Horizontal" Spacing="6">
											<Svg Path="avares://MedicInPoint/Assets/SVGs/add_analysis_order.svg" Width="22" Height="22" />
											<TextBlock Text="Добавить" FontSize="16" LineHeight="16" VerticalAlignment="Center" />
										</StackPanel>
									</Button>
								</Grid>
							</Border>
						</StackPanel>
					</Border>
				</Grid>
				<!--#region Main Content -->

				<!--#region Drawer -->
				<drawer:PatientDrawerView Grid.Column="4" DataContext="{CompiledBinding SelectedPatient}" />
				<!--#region Drawer -->
			</Grid>
		</Grid>
	</Grid>
</UserControl>